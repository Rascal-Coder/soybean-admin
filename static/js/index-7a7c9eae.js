import{a as J,e as L,b4 as te,ba as P,bb as ae,aF as H,h as b,k as j,l as W,o as p,s as v,J as Y,aE as B,U as E,y as t,V as K,W as T,x as _,v as $,z as Q,L as ne,r as X,bc as Z,aA as ee,bd as se,be as U,i as le,I as O,Q as S,a6 as F,T as z,bf as oe,ah as q,ai as x,aj as R,c as re,Y as ce}from"./index-77c85d6b.js";const I=["sun","mon","tue","wed","thu","fri","sat"],V=e=>Array.from(Array.from({length:e}).keys()),de=(e,s)=>{const u=e.subtract(1,"month").endOf("month").date();return V(s).map((c,d)=>u-(s-d-1))},ie=e=>{const s=e.daysInMonth();return V(s).map((u,c)=>c+1)},ue=e=>V(e.length/7).map(s=>{const u=s*7;return e.slice(u,u+7)}),me=J({selectedDay:{type:L(Object)},range:{type:L(Array)},date:{type:L(Object),required:!0},hideHeader:{type:Boolean}}),ye={pick:e=>te(e)},he=(e,s)=>{P.extend(ae);const u=P.localeData().firstDayOfWeek(),{t:c,lang:d}=H(),f=P().locale(d.value),D=b(()=>!!e.range&&!!e.range.length),k=b(()=>{let n=[];if(D.value){const[a,l]=e.range,i=V(l.date()-a.date()+1).map(r=>({text:a.date()+r,type:"current"}));let m=i.length%7;m=m===0?0:7-m;const o=V(m).map((r,y)=>({text:y+1,type:"next"}));n=i.concat(o)}else{const a=e.date.startOf("month").day(),l=de(e.date,(a-u+7)%7).map(r=>({text:r,type:"prev"})),i=ie(e.date).map(r=>({text:r,type:"current"}));n=[...l,...i];const m=7-(n.length%7||7),o=V(m).map((r,y)=>({text:y+1,type:"next"}));n=n.concat(o)}return ue(n)}),M=b(()=>{const n=u;return n===0?I.map(a=>c(`el.datepicker.weeks.${a}`)):I.slice(n).concat(I.slice(0,n)).map(a=>c(`el.datepicker.weeks.${a}`))}),h=(n,a)=>{switch(a){case"prev":return e.date.startOf("month").subtract(1,"month").date(n);case"next":return e.date.startOf("month").add(1,"month").date(n);case"current":return e.date.date(n)}};return{now:f,isInRange:D,rows:k,weekDays:M,getFormattedDate:h,handlePickDay:({text:n,type:a})=>{const l=h(n,a);s("pick",l)},getSlotData:({text:n,type:a})=>{const l=h(n,a);return{isSelected:l.isSame(e.selectedDay),type:`${a}-month`,day:l.format("YYYY-MM-DD"),date:l.toDate()}}}},fe={key:0},De=["onClick"],pe=j({name:"DateTable"}),ve=j({...pe,props:me,emits:ye,setup(e,{expose:s,emit:u}){const c=e,{isInRange:d,now:f,rows:D,weekDays:k,getFormattedDate:M,handlePickDay:h,getSlotData:w}=he(c,u),g=W("calendar-table"),n=W("calendar-day"),a=({text:l,type:i})=>{const m=[i];if(i==="current"){const o=M(l,i);o.isSame(c.selectedDay,"day")&&m.push(n.is("selected")),o.isSame(f,"day")&&m.push(n.is("today"))}return m};return s({getFormattedDate:M}),(l,i)=>(p(),v("table",{class:_([t(g).b(),t(g).is("range",t(d))]),cellspacing:"0",cellpadding:"0"},[l.hideHeader?K("v-if",!0):(p(),v("thead",fe,[(p(!0),v(Y,null,B(t(k),m=>(p(),v("th",{key:m},E(m),1))),128))])),T("tbody",null,[(p(!0),v(Y,null,B(t(D),(m,o)=>(p(),v("tr",{key:o,class:_({[t(g).e("row")]:!0,[t(g).em("row","hide-border")]:o===0&&l.hideHeader})},[(p(!0),v(Y,null,B(m,(r,y)=>(p(),v("td",{key:y,class:_(a(r)),onClick:C=>t(h)(r)},[T("div",{class:_(t(n).b())},[$(l.$slots,"date-cell",{data:t(w)(r)},()=>[T("span",null,E(r.text),1)])],2)],10,De))),128))],2))),128))])],2))}});var G=Q(ve,[["__file","date-table.vue"]]);const ke=(e,s)=>{const u=e.endOf("month"),c=s.startOf("month"),f=u.isSame(c,"week")?c.add(1,"week"):c;return[[e,u],[f.startOf("week"),s]]},ge=(e,s)=>{const u=e.endOf("month"),c=e.add(1,"month").startOf("month"),d=u.isSame(c,"week")?c.add(1,"week"):c,f=d.endOf("month"),D=s.startOf("month"),k=f.isSame(D,"week")?D.add(1,"week"):D;return[[e,u],[d.startOf("week"),f],[k.startOf("week"),s]]},Me=(e,s,u)=>{const c=ne(),{lang:d}=H(),f=X(),D=P().locale(d.value),k=b({get(){return e.modelValue?h.value:f.value},set(o){if(!o)return;f.value=o;const r=o.toDate();s(Z,r),s(ee,r)}}),M=b(()=>{if(!e.range)return[];const o=e.range.map(C=>P(C).locale(d.value)),[r,y]=o;return r.isAfter(y)?[]:r.isSame(y,"month")?l(r,y):r.add(1,"month").month()!==y.month()?[]:l(r,y)}),h=b(()=>e.modelValue?P(e.modelValue).locale(d.value):k.value||(M.value.length?M.value[0][0]:D)),w=b(()=>h.value.subtract(1,"month").date(1)),g=b(()=>h.value.add(1,"month").date(1)),n=b(()=>h.value.subtract(1,"year").date(1)),a=b(()=>h.value.add(1,"year").date(1)),l=(o,r)=>{const y=o.startOf("week"),C=r.endOf("week"),A=y.get("month"),N=C.get("month");return A===N?[[y,C]]:(A+1)%12===N?ke(y,C):A+2===N||(A+1)%11===N?ge(y,C):[]},i=o=>{k.value=o},m=o=>{const y={"prev-month":w.value,"next-month":g.value,"prev-year":n.value,"next-year":a.value,today:D}[o];y.isSame(h.value,"day")||i(y)};return se({from:'"dateCell"',replacement:'"date-cell"',scope:"ElCalendar",version:"2.3.0",ref:"https://element-plus.org/en-US/component/calendar.html#slots",type:"Slot"},b(()=>!!c.dateCell)),{calculateValidatedDateRange:l,date:h,realSelectedDay:k,pickDay:i,selectDate:m,validatedRange:M}},be=e=>le(e)&&e.length===2&&e.every(s=>U(s)),_e=J({modelValue:{type:Date},range:{type:L(Array),validator:be}}),we={[ee]:e=>U(e),[Z]:e=>U(e)},Ce="ElCalendar",Se=j({name:Ce}),$e=j({...Se,props:_e,emits:we,setup(e,{expose:s,emit:u}){const c=e,d=W("calendar"),{calculateValidatedDateRange:f,date:D,pickDay:k,realSelectedDay:M,selectDate:h,validatedRange:w}=Me(c,u),{t:g}=H(),n=b(()=>{const a=`el.datepicker.month${D.value.format("M")}`;return`${D.value.year()} ${g("el.datepicker.year")} ${g(a)}`});return s({selectedDay:M,pickDay:k,selectDate:h,calculateValidatedDateRange:f}),(a,l)=>(p(),v("div",{class:_(t(d).b())},[T("div",{class:_(t(d).e("header"))},[$(a.$slots,"header",{date:t(n)},()=>[T("div",{class:_(t(d).e("title"))},E(t(n)),3),t(w).length===0?(p(),v("div",{key:0,class:_(t(d).e("button-group"))},[O(t(oe),null,{default:S(()=>[O(t(F),{size:"small",onClick:l[0]||(l[0]=i=>t(h)("prev-month"))},{default:S(()=>[z(E(t(g)("el.datepicker.prevMonth")),1)]),_:1}),O(t(F),{size:"small",onClick:l[1]||(l[1]=i=>t(h)("today"))},{default:S(()=>[z(E(t(g)("el.datepicker.today")),1)]),_:1}),O(t(F),{size:"small",onClick:l[2]||(l[2]=i=>t(h)("next-month"))},{default:S(()=>[z(E(t(g)("el.datepicker.nextMonth")),1)]),_:1})]),_:1})],2)):K("v-if",!0)])],2),t(w).length===0?(p(),v("div",{key:0,class:_(t(d).e("body"))},[O(G,{date:t(D),"selected-day":t(M),onPick:t(k)},q({_:2},[a.$slots["date-cell"]||a.$slots.dateCell?{name:"date-cell",fn:S(i=>[a.$slots["date-cell"]?$(a.$slots,"date-cell",x(R({key:0},i))):$(a.$slots,"dateCell",x(R({key:1},i)))])}:void 0]),1032,["date","selected-day","onPick"])],2)):(p(),v("div",{key:1,class:_(t(d).e("body"))},[(p(!0),v(Y,null,B(t(w),(i,m)=>(p(),re(G,{key:m,date:i[0],"selected-day":t(M),range:i,"hide-header":m!==0,onPick:t(k)},q({_:2},[a.$slots["date-cell"]||a.$slots.dateCell?{name:"date-cell",fn:S(o=>[a.$slots["date-cell"]?$(a.$slots,"date-cell",x(R({key:0},o))):$(a.$slots,"dateCell",x(R({key:1},o)))])}:void 0]),1032,["date","selected-day","range","hide-header","onPick"]))),128))],2))],2))}});var Oe=Q($e,[["__file","calendar.vue"]]);const Ee=ce(Oe);const Ve=j({__name:"index",setup(e){const s=X(new Date);return(u,c)=>{const d=Ee;return p(),v("div",null,[O(d,{modelValue:s.value,"onUpdate:modelValue":c[0]||(c[0]=f=>s.value=f)},null,8,["modelValue"])])}}});export{Ve as default};
