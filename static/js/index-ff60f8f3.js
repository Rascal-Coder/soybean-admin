import{a as K,e as Y,as as ae,at as P,au as ne,av as q,h as _,k as j,l as W,o as k,s as g,J as A,aw as N,U as S,y as t,V as Q,W as V,x as w,v as O,z as X,L as se,r as U,ax as Z,ay as ee,az as le,aA as H,i as oe,I as E,Q as $,ad as z,T as F,aB as re,aC as G,aD as R,aE as B,c as te,Y as ce,aF as de}from"./index-fdb736fb.js";const I=["sun","mon","tue","wed","thu","fri","sat"],T=e=>Array.from(Array.from({length:e}).keys()),ue=(e,s)=>{const u=e.subtract(1,"month").endOf("month").date();return T(s).map((d,c)=>u-(s-c-1))},ie=e=>{const s=e.daysInMonth();return T(s).map((u,d)=>d+1)},me=e=>T(e.length/7).map(s=>{const u=s*7;return e.slice(u,u+7)}),ye=K({selectedDay:{type:Y(Object)},range:{type:Y(Array)},date:{type:Y(Object),required:!0},hideHeader:{type:Boolean}}),he={pick:e=>ae(e)},pe=(e,s)=>{P.extend(ne);const u=P.localeData().firstDayOfWeek(),{t:d,lang:c}=q(),f=P().locale(c.value),h=_(()=>!!e.range&&!!e.range.length),v=_(()=>{let n=[];if(h.value){const[a,l]=e.range,i=T(l.date()-a.date()+1).map(r=>({text:a.date()+r,type:"current"}));let y=i.length%7;y=y===0?0:7-y;const o=T(y).map((r,p)=>({text:p+1,type:"next"}));n=i.concat(o)}else{const a=e.date.startOf("month").day(),l=ue(e.date,(a-u+7)%7).map(r=>({text:r,type:"prev"})),i=ie(e.date).map(r=>({text:r,type:"current"}));n=[...l,...i];const y=7-(n.length%7||7),o=T(y).map((r,p)=>({text:p+1,type:"next"}));n=n.concat(o)}return me(n)}),D=_(()=>{const n=u;return n===0?I.map(a=>d(`el.datepicker.weeks.${a}`)):I.slice(n).concat(I.slice(0,n)).map(a=>d(`el.datepicker.weeks.${a}`))}),m=(n,a)=>{switch(a){case"prev":return e.date.startOf("month").subtract(1,"month").date(n);case"next":return e.date.startOf("month").add(1,"month").date(n);case"current":return e.date.date(n)}};return{now:f,isInRange:h,rows:v,weekDays:D,getFormattedDate:m,handlePickDay:({text:n,type:a})=>{const l=m(n,a);s("pick",l)},getSlotData:({text:n,type:a})=>{const l=m(n,a);return{isSelected:l.isSame(e.selectedDay),type:`${a}-month`,day:l.format("YYYY-MM-DD"),date:l.toDate()}}}},fe={key:0},De=["onClick"],ke=j({name:"DateTable"}),ve=j({...ke,props:ye,emits:he,setup(e,{expose:s,emit:u}){const d=e,{isInRange:c,now:f,rows:h,weekDays:v,getFormattedDate:D,handlePickDay:m,getSlotData:C}=pe(d,u),M=W("calendar-table"),n=W("calendar-day"),a=({text:l,type:i})=>{const y=[i];if(i==="current"){const o=D(l,i);o.isSame(d.selectedDay,"day")&&y.push(n.is("selected")),o.isSame(f,"day")&&y.push(n.is("today"))}return y};return s({getFormattedDate:D}),(l,i)=>(k(),g("table",{class:w([t(M).b(),t(M).is("range",t(c))]),cellspacing:"0",cellpadding:"0"},[l.hideHeader?Q("v-if",!0):(k(),g("thead",fe,[(k(!0),g(A,null,N(t(v),y=>(k(),g("th",{key:y},S(y),1))),128))])),V("tbody",null,[(k(!0),g(A,null,N(t(h),(y,o)=>(k(),g("tr",{key:o,class:w({[t(M).e("row")]:!0,[t(M).em("row","hide-border")]:o===0&&l.hideHeader})},[(k(!0),g(A,null,N(y,(r,p)=>(k(),g("td",{key:p,class:w(a(r)),onClick:b=>t(m)(r)},[V("div",{class:w(t(n).b())},[O(l.$slots,"date-cell",{data:t(C)(r)},()=>[V("span",null,S(r.text),1)])],2)],10,De))),128))],2))),128))])],2))}});var J=X(ve,[["__file","/home/runner/work/element-plus/element-plus/packages/components/calendar/src/date-table.vue"]]);const ge=(e,s)=>{const u=e.endOf("month"),d=s.startOf("month"),f=u.isSame(d,"week")?d.add(1,"week"):d;return[[e,u],[f.startOf("week"),s]]},Me=(e,s)=>{const u=e.endOf("month"),d=e.add(1,"month").startOf("month"),c=u.isSame(d,"week")?d.add(1,"week"):d,f=c.endOf("month"),h=s.startOf("month"),v=f.isSame(h,"week")?h.add(1,"week"):h;return[[e,u],[c.startOf("week"),f],[v.startOf("week"),s]]},_e=(e,s,u)=>{const d=se(),{lang:c}=q(),f=U(),h=P().locale(c.value),v=_({get(){return e.modelValue?m.value:f.value},set(o){if(!o)return;f.value=o;const r=o.toDate();s(Z,r),s(ee,r)}}),D=_(()=>{if(!e.range)return[];const o=e.range.map(b=>P(b).locale(c.value)),[r,p]=o;return r.isAfter(p)?[]:r.isSame(p,"month")?l(r,p):r.add(1,"month").month()!==p.month()?[]:l(r,p)}),m=_(()=>e.modelValue?P(e.modelValue).locale(c.value):v.value||(D.value.length?D.value[0][0]:h)),C=_(()=>m.value.subtract(1,"month").date(1)),M=_(()=>m.value.add(1,"month").date(1)),n=_(()=>m.value.subtract(1,"year").date(1)),a=_(()=>m.value.add(1,"year").date(1)),l=(o,r)=>{const p=o.startOf("week"),b=r.endOf("week"),x=p.get("month"),L=b.get("month");return x===L?[[p,b]]:(x+1)%12===L?ge(p,b):x+2===L||(x+1)%11===L?Me(p,b):[]},i=o=>{v.value=o},y=o=>{const p={"prev-month":C.value,"next-month":M.value,"prev-year":n.value,"next-year":a.value,today:h}[o];p.isSame(m.value,"day")||i(p)};return le({from:'"dateCell"',replacement:'"date-cell"',scope:"ElCalendar",version:"2.3.0",ref:"https://element-plus.org/en-US/component/calendar.html#slots",type:"Slot"},_(()=>!!d.dateCell)),{calculateValidatedDateRange:l,date:m,realSelectedDay:v,pickDay:i,selectDate:y,validatedRange:D}},we=e=>oe(e)&&e.length===2&&e.every(s=>H(s)),Ce=K({modelValue:{type:Date},range:{type:Y(Array),validator:we}}),be={[ee]:e=>H(e),[Z]:e=>H(e)},$e="ElCalendar",Se=j({name:$e}),Oe=j({...Se,props:Ce,emits:be,setup(e,{expose:s,emit:u}){const d=e,c=W("calendar"),{calculateValidatedDateRange:f,date:h,pickDay:v,realSelectedDay:D,selectDate:m,validatedRange:C}=_e(d,u),{t:M}=q(),n=_(()=>{const a=`el.datepicker.month${h.value.format("M")}`;return`${h.value.year()} ${M("el.datepicker.year")} ${M(a)}`});return s({selectedDay:D,pickDay:v,selectDate:m,calculateValidatedDateRange:f}),(a,l)=>(k(),g("div",{class:w(t(c).b())},[V("div",{class:w(t(c).e("header"))},[O(a.$slots,"header",{date:t(n)},()=>[V("div",{class:w(t(c).e("title"))},S(t(n)),3),t(C).length===0?(k(),g("div",{key:0,class:w(t(c).e("button-group"))},[E(t(re),null,{default:$(()=>[E(t(z),{size:"small",onClick:l[0]||(l[0]=i=>t(m)("prev-month"))},{default:$(()=>[F(S(t(M)("el.datepicker.prevMonth")),1)]),_:1}),E(t(z),{size:"small",onClick:l[1]||(l[1]=i=>t(m)("today"))},{default:$(()=>[F(S(t(M)("el.datepicker.today")),1)]),_:1}),E(t(z),{size:"small",onClick:l[2]||(l[2]=i=>t(m)("next-month"))},{default:$(()=>[F(S(t(M)("el.datepicker.nextMonth")),1)]),_:1})]),_:1})],2)):Q("v-if",!0)])],2),t(C).length===0?(k(),g("div",{key:0,class:w(t(c).e("body"))},[E(J,{date:t(h),"selected-day":t(D),onPick:t(v)},G({_:2},[a.$slots["date-cell"]||a.$slots.dateCell?{name:"date-cell",fn:$(i=>[a.$slots["date-cell"]?O(a.$slots,"date-cell",R(B({key:0},i))):O(a.$slots,"dateCell",R(B({key:1},i)))])}:void 0]),1032,["date","selected-day","onPick"])],2)):(k(),g("div",{key:1,class:w(t(c).e("body"))},[(k(!0),g(A,null,N(t(C),(i,y)=>(k(),te(J,{key:y,date:i[0],"selected-day":t(D),range:i,"hide-header":y!==0,onPick:t(v)},G({_:2},[a.$slots["date-cell"]||a.$slots.dateCell?{name:"date-cell",fn:$(o=>[a.$slots["date-cell"]?O(a.$slots,"date-cell",R(B({key:0},o))):O(a.$slots,"dateCell",R(B({key:1},o)))])}:void 0]),1032,["date","selected-day","range","hide-header","onPick"]))),128))],2))],2))}});var Ee=X(Oe,[["__file","/home/runner/work/element-plus/element-plus/packages/components/calendar/src/calendar.vue"]]);const Pe=ce(Ee);const Te=j({__name:"index",setup(e){const s=U(new Date),u=U(["loading","pulse","rect","plane","cube","preloader","chase","dot"]),d=c=>{const{open:f,close:h}=de({spin:c});f(),setTimeout(()=>{h()},2e3)};return(c,f)=>{const h=Pe,v=z;return k(),g("div",null,[E(h,{modelValue:s.value,"onUpdate:modelValue":f[0]||(f[0]=D=>s.value=D)},null,8,["modelValue"]),V("div",null,[(k(!0),g(A,null,N(u.value,(D,m)=>(k(),te(v,{key:D,type:"primary",onClick:C=>d(D)},{default:$(()=>[F(" loading"+S(m+1),1)]),_:2},1032,["onClick"]))),128))])])}}});export{Te as default};
