import{a as J,e as L,a$ as te,b8 as P,b9 as ae,aG as H,h as M,k as N,l as W,o as p,s as v,J as Y,aF as B,U as E,y as t,V as K,W as T,x as _,v as S,z as Q,L as ne,r as Z,ba as X,ag as ee,bb as se,bc as U,i as le,I as O,Q as C,a6 as F,T as z,bd as oe,aZ as G,b3 as x,b2 as R,c as re,Y as ce}from"./index-4e05fb4b.js";const I=["sun","mon","tue","wed","thu","fri","sat"],V=e=>Array.from(Array.from({length:e}).keys()),de=(e,s)=>{const i=e.subtract(1,"month").endOf("month").date();return V(s).map((c,d)=>i-(s-d-1))},ue=e=>{const s=e.daysInMonth();return V(s).map((i,c)=>c+1)},ie=e=>V(e.length/7).map(s=>{const i=s*7;return e.slice(i,i+7)}),me=J({selectedDay:{type:L(Object)},range:{type:L(Array)},date:{type:L(Object),required:!0},hideHeader:{type:Boolean}}),ye={pick:e=>te(e)},he=(e,s)=>{P.extend(ae);const i=P.localeData().firstDayOfWeek(),{t:c,lang:d}=H(),f=P().locale(d.value),D=M(()=>!!e.range&&!!e.range.length),k=M(()=>{let n=[];if(D.value){const[a,l]=e.range,u=V(l.date()-a.date()+1).map(r=>({text:a.date()+r,type:"current"}));let m=u.length%7;m=m===0?0:7-m;const o=V(m).map((r,y)=>({text:y+1,type:"next"}));n=u.concat(o)}else{const a=e.date.startOf("month").day(),l=de(e.date,(a-i+7)%7).map(r=>({text:r,type:"prev"})),u=ue(e.date).map(r=>({text:r,type:"current"}));n=[...l,...u];const m=7-(n.length%7||7),o=V(m).map((r,y)=>({text:y+1,type:"next"}));n=n.concat(o)}return ie(n)}),b=M(()=>{const n=i;return n===0?I.map(a=>c(`el.datepicker.weeks.${a}`)):I.slice(n).concat(I.slice(0,n)).map(a=>c(`el.datepicker.weeks.${a}`))}),h=(n,a)=>{switch(a){case"prev":return e.date.startOf("month").subtract(1,"month").date(n);case"next":return e.date.startOf("month").add(1,"month").date(n);case"current":return e.date.date(n)}};return{now:f,isInRange:D,rows:k,weekDays:b,getFormattedDate:h,handlePickDay:({text:n,type:a})=>{const l=h(n,a);s("pick",l)},getSlotData:({text:n,type:a})=>{const l=h(n,a);return{isSelected:l.isSame(e.selectedDay),type:`${a}-month`,day:l.format("YYYY-MM-DD"),date:l.toDate()}}}},fe={key:0},De=["onClick"],pe=N({name:"DateTable"}),ve=N({...pe,props:me,emits:ye,setup(e,{expose:s,emit:i}){const c=e,{isInRange:d,now:f,rows:D,weekDays:k,getFormattedDate:b,handlePickDay:h,getSlotData:w}=he(c,i),g=W("calendar-table"),n=W("calendar-day"),a=({text:l,type:u})=>{const m=[u];if(u==="current"){const o=b(l,u);o.isSame(c.selectedDay,"day")&&m.push(n.is("selected")),o.isSame(f,"day")&&m.push(n.is("today"))}return m};return s({getFormattedDate:b}),(l,u)=>(p(),v("table",{class:_([t(g).b(),t(g).is("range",t(d))]),cellspacing:"0",cellpadding:"0"},[l.hideHeader?K("v-if",!0):(p(),v("thead",fe,[(p(!0),v(Y,null,B(t(k),m=>(p(),v("th",{key:m},E(m),1))),128))])),T("tbody",null,[(p(!0),v(Y,null,B(t(D),(m,o)=>(p(),v("tr",{key:o,class:_({[t(g).e("row")]:!0,[t(g).em("row","hide-border")]:o===0&&l.hideHeader})},[(p(!0),v(Y,null,B(m,(r,y)=>(p(),v("td",{key:y,class:_(a(r)),onClick:$=>t(h)(r)},[T("div",{class:_(t(n).b())},[S(l.$slots,"date-cell",{data:t(w)(r)},()=>[T("span",null,E(r.text),1)])],2)],10,De))),128))],2))),128))])],2))}});var q=Q(ve,[["__file","date-table.vue"]]);const ke=(e,s)=>{const i=e.endOf("month"),c=s.startOf("month"),f=i.isSame(c,"week")?c.add(1,"week"):c;return[[e,i],[f.startOf("week"),s]]},ge=(e,s)=>{const i=e.endOf("month"),c=e.add(1,"month").startOf("month"),d=i.isSame(c,"week")?c.add(1,"week"):c,f=d.endOf("month"),D=s.startOf("month"),k=f.isSame(D,"week")?D.add(1,"week"):D;return[[e,i],[d.startOf("week"),f],[k.startOf("week"),s]]},be=(e,s,i)=>{const c=ne(),{lang:d}=H(),f=Z(),D=P().locale(d.value),k=M({get(){return e.modelValue?h.value:f.value},set(o){if(!o)return;f.value=o;const r=o.toDate();s(X,r),s(ee,r)}}),b=M(()=>{if(!e.range)return[];const o=e.range.map($=>P($).locale(d.value)),[r,y]=o;return r.isAfter(y)?[]:r.isSame(y,"month")?l(r,y):r.add(1,"month").month()!==y.month()?[]:l(r,y)}),h=M(()=>e.modelValue?P(e.modelValue).locale(d.value):k.value||(b.value.length?b.value[0][0]:D)),w=M(()=>h.value.subtract(1,"month").date(1)),g=M(()=>h.value.add(1,"month").date(1)),n=M(()=>h.value.subtract(1,"year").date(1)),a=M(()=>h.value.add(1,"year").date(1)),l=(o,r)=>{const y=o.startOf("week"),$=r.endOf("week"),j=y.get("month"),A=$.get("month");return j===A?[[y,$]]:(j+1)%12===A?ke(y,$):j+2===A||(j+1)%11===A?ge(y,$):[]},u=o=>{k.value=o},m=o=>{const y={"prev-month":w.value,"next-month":g.value,"prev-year":n.value,"next-year":a.value,today:D}[o];y.isSame(h.value,"day")||u(y)};return se({from:'"dateCell"',replacement:'"date-cell"',scope:"ElCalendar",version:"2.3.0",ref:"https://element-plus.org/en-US/component/calendar.html#slots",type:"Slot"},M(()=>!!c.dateCell)),{calculateValidatedDateRange:l,date:h,realSelectedDay:k,pickDay:u,selectDate:m,validatedRange:b}},Me=e=>le(e)&&e.length===2&&e.every(s=>U(s)),_e=J({modelValue:{type:Date},range:{type:L(Array),validator:Me}}),we={[ee]:e=>U(e),[X]:e=>U(e)},$e="ElCalendar",Ce=N({name:$e}),Se=N({...Ce,props:_e,emits:we,setup(e,{expose:s,emit:i}){const c=e,d=W("calendar"),{calculateValidatedDateRange:f,date:D,pickDay:k,realSelectedDay:b,selectDate:h,validatedRange:w}=be(c,i),{t:g}=H(),n=M(()=>{const a=`el.datepicker.month${D.value.format("M")}`;return`${D.value.year()} ${g("el.datepicker.year")} ${g(a)}`});return s({selectedDay:b,pickDay:k,selectDate:h,calculateValidatedDateRange:f}),(a,l)=>(p(),v("div",{class:_(t(d).b())},[T("div",{class:_(t(d).e("header"))},[S(a.$slots,"header",{date:t(n)},()=>[T("div",{class:_(t(d).e("title"))},E(t(n)),3),t(w).length===0?(p(),v("div",{key:0,class:_(t(d).e("button-group"))},[O(t(oe),null,{default:C(()=>[O(t(F),{size:"small",onClick:l[0]||(l[0]=u=>t(h)("prev-month"))},{default:C(()=>[z(E(t(g)("el.datepicker.prevMonth")),1)]),_:1}),O(t(F),{size:"small",onClick:l[1]||(l[1]=u=>t(h)("today"))},{default:C(()=>[z(E(t(g)("el.datepicker.today")),1)]),_:1}),O(t(F),{size:"small",onClick:l[2]||(l[2]=u=>t(h)("next-month"))},{default:C(()=>[z(E(t(g)("el.datepicker.nextMonth")),1)]),_:1})]),_:1})],2)):K("v-if",!0)])],2),t(w).length===0?(p(),v("div",{key:0,class:_(t(d).e("body"))},[O(q,{date:t(D),"selected-day":t(b),onPick:t(k)},G({_:2},[a.$slots["date-cell"]||a.$slots.dateCell?{name:"date-cell",fn:C(u=>[a.$slots["date-cell"]?S(a.$slots,"date-cell",x(R({key:0},u))):S(a.$slots,"dateCell",x(R({key:1},u)))])}:void 0]),1032,["date","selected-day","onPick"])],2)):(p(),v("div",{key:1,class:_(t(d).e("body"))},[(p(!0),v(Y,null,B(t(w),(u,m)=>(p(),re(q,{key:m,date:u[0],"selected-day":t(b),range:u,"hide-header":m!==0,onPick:t(k)},G({_:2},[a.$slots["date-cell"]||a.$slots.dateCell?{name:"date-cell",fn:C(o=>[a.$slots["date-cell"]?S(a.$slots,"date-cell",x(R({key:0},o))):S(a.$slots,"dateCell",x(R({key:1},o)))])}:void 0]),1032,["date","selected-day","range","hide-header","onPick"]))),128))],2))],2))}});var Oe=Q(Se,[["__file","calendar.vue"]]);const Ee=ce(Oe);const Ve=N({__name:"index",setup(e){const s=Z(new Date);return(i,c)=>{const d=Ee;return p(),v("div",null,[O(d,{modelValue:s.value,"onUpdate:modelValue":c[0]||(c[0]=f=>s.value=f)},null,8,["modelValue"])])}}});export{Ve as default};
